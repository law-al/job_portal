export enum ErrorCodes {
  // Authentication & Authorization (1xxx)
  INVALID_CREDENTIALS = 1001,
  TOKEN_EXPIRED = 1002,
  TOKEN_INVALID = 1003,
  UNAUTHORIZED = 1004,
  FORBIDDEN = 1005,
  INSUFFICIENT_PERMISSIONS = 1006,
  ACCOUNT_NOT_VERIFIED = 1007,
  ACCOUNT_SUSPENDED = 1008,
  ACCOUNT_DISABLED = 1009,
  PASSWORD_NOT_CORRECT = 1010,
  ACCESS_TOKEN_NOT_FOUND = 1011,
  BAD_REQUEST = 1030,

  // Validation Errors (2xxx)
  VALIDATION_ERROR = 2001,
  INVALID_INPUT = 2002,
  MISSING_REQUIRED_FIELD = 2003,
  INVALID_FILE_TYPE = 2004,
  INVALID_ID_FORMAT = 2005,
  MISSING_USER_ID = 2006,
  MISSING_JOB_ID = 2007,
  MISSING_COMPANY_ID = 2008,
  MISSING_APPLICATION_ID = 2009,
  INVALID_USER_ID = 2010,
  INVALID_JOB_ID = 2011,
  INVALID_COMPANY_ID = 2012,
  INVALID_APPLICATION_ID = 2013,

  // Database Errors (3xxx)
  UNIQUE_CONSTRAINT = 3001,
  FOREIGN_KEY_CONSTRAINT = 3002,
  RECORD_NOT_FOUND = 3003,
  DATABASE_ERROR = 3004,
  USER_NOT_FOUND = 3005,
  JOB_NOT_FOUND = 3006,
  APPLICATION_NOT_FOUND = 3007,
  COMPANY_NOT_FOUND = 3008,
  DATABASE_CONNECTION_FAILED = 3009,
  DATABASE_TIMEOUT = 3010,
  DATABASE_QUERY_FAILED = 3011,
  DATABASE_TRANSACTION_FAILED = 3012,
  DATABASE_CRITICAL_ERROR = 3013,

  // Business Logic Errors (4xxx)
  DUPLICATE_ENTRY = 4001,
  RESOURCE_ALREADY_EXISTS = 4002,
  OPERATION_NOT_ALLOWED = 4003,
  RESOURCE_CONFLICT = 4004,
  EMAIL_ALREADY_EXISTS = 4005,
  UNPROCESSABLE_ENTITY = 4006,
  USER_ALREADY_VERIFIED = 4007,
  VERIFICATION_EXPIRED = 4008,
  INVALID_VERIFICATION_CODE = 4009,
  PASSWORD_RESET_EXPIRED = 4010,
  INVALID_PASSWORD_RESET_TOKEN = 4011,
  JOB_ALREADY_APPLIED = 4012,
  JOB_ALREADY_CLOSED = 4013,
  APPLICATION_ALREADY_WITHDRAWN = 4014,
  APPLICATION_ALREADY_ACCEPTED = 4015,
  APPLICATION_ALREADY_REJECTED = 4016,
  EMAIL_LINK_EXPIRED = 4017,
  INVALID_INVITE_RESET_TOKEN = 4018,
  NOT_FOUND = 4019,

  // External Service Errors (5xxx)
  EXTERNAL_API_ERROR = 5001,
  PAYMENT_FAILED = 5002,
  EMAIL_SEND_FAILED = 5003,
  PAYMENT_REQUIRED = 5004,
  BAD_GATEWAY = 5005,

  // Rate Limiting (6xxx)
  RATE_LIMIT_EXCEEDED = 6001,
  TOO_MANY_REQUESTS = 6002,

  // File Errors (7xxx)
  FILE_TOO_LARGE = 7001,
  FILE_UPLOAD_FAILED = 7002,

  // Server Errors (9xxx)
  INTERNAL_SERVER_ERROR = 9001,
  NOT_IMPLEMENTED = 9002,
  SERVICE_UNAVAILABLE = 9003,
  GATEWAY_TIMEOUT = 9004,
  UNKNOWN_ERROR = 9999,
}

export type ErrorCode = (typeof ErrorCodes)[keyof typeof ErrorCodes];

export class ApiError extends Error {
  isOperational: boolean;

  constructor(
    message: string,
    public statusCode: number,
    public errorCode: ErrorCodes,
    public error: any,
  ) {
    super(message);
    this.statusCode = statusCode;
    this.error = error;
    this.isOperational = true;

    Error.captureStackTrace(this, this.constructor);
  }
}
